jQuery(document).ready(function(a){var b=a("#_ywcdd_workday").select2(),c=function(){a(".yith_timeslot_all_day").on("click",function(b){b.preventDefault();var c=a(this).parents(".yith_single_multiworkday");timeselectday=c.find("select.yith_dayworkselect").select2(),timeselectday.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),a(".yith_timeslot_clear").on("click",function(b){b.preventDefault();var c=a(this).parents(".yith_single_multiworkday"),d=c.find("select.yith_dayworkselect").select2();d.val(null).trigger("change")})};a(".yith_select_all_day").on("click",function(a){a.preventDefault(),b.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),a(".yith_select_clear").on("click",function(a){a.preventDefault(),b.val(null).trigger("change")});var d=function(){a(".yith_timepicker").timepicker({timeFormat:yith_delivery_parmas.timeformat})},e=function(){a("#yith_timepicker_from").val(""),a("#yith_timepicker_to").val(""),a("#yith_max_tot_order").val(""),a("#yith_fee").val("")};d();var f=a(".ywcdd_carrier_table"),h=(f.find("#the-list"),{message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0});a("#yith_add_time_slot").on("click",function(b){b.preventDefault();var g=a("#yith_timepicker_from").val(),i=a("#yith_timepicker_to").val(),m=a("#yith_max_tot_order").val(),n=a("#yith_fee").val(),o=a("#yith_carrier_id").val(),p=a("#yith_metakey").val();if(""!=g&&""!=i){var q={ywcdd_time_from:g,ywcdd_time_to:i,ywcdd_max_order:m,ywcdd_fee:n,ywcdd_post_id:o,ywcdd_metakey:p,action:yith_delivery_parmas.actions.add_carrier_time_slot};f.block(h),a.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:q,dataType:"json",success:function(a){f.unblock(),f.find(".no-items").hide(),rows=f.find("#the-list>tr").not(".no-items").get(),rows.length>0?f.find("#the-list>tr:last-child").not(".no-items").after(a.template):f.find(".no-items").after(a.template),f.find("select.yith_dayworkselect").select2(),d(),c(),l(),j(),k(),e()}})}});var i=function(){var b=f.find("a.yith_update_time_slot"),c=f.find("a.yith_delete_time_slot");b.each(function(b){a(this).data("item_id",b)}),c.each(function(b){a(this).data("item_id",b)})},j=function(){update_button=f.find(".yith_update_time_slot"),update_button.on("click",function(b){b.preventDefault();var c=a(this).parents("tr"),d=c.find(".timepicker_timefrom").val(),e=c.find(".timepicker_timeto").val(),g=c.find(".yith_max_order").val(),i=c.find(".yith_fee").val(),j=c.find(".yith_override_day").is(":checked")?"yes":"no",k=c.find(".yith_dayworkselect").select2("val"),l=a(this).data("item_id"),m=a("#yith_carrier_id").val(),n=a("#yith_metakey").val();if(""!=d&&""!=e){f.block(h);var o={ywcdd_time_from:d,ywcdd_time_to:e,ywcdd_max_order:g,ywcdd_fee:i,ywcdd_day:k,ywcdd_carrier_id:m,ywcdd_metakey:n,override_days:j,item_id:l,action:yith_delivery_parmas.actions.update_carrier_time_slot};a.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:o,dataType:"json",success:function(a){f.unblock()}})}})},k=function(){delete_button=f.find(".yith_delete_time_slot"),delete_button.on("click",function(b){b.preventDefault();var c=a(this).parents("tr"),d=a(this).data("item_id"),e=a("#the-list"),g=a("#yith_carrier_id").val(),j=a("#yith_metakey").val(),k={item_id:d,ywcdd_carrier_id:g,ywcdd_metakey:j,action:yith_delivery_parmas.actions.delete_carrier_time_slot};f.block(h),a.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:k,dataType:"json",success:function(a){c.remove(),0==e.find("tr").length&&e.html(yith_delivery_parmas.empty_row),i(),f.unblock()}})})};j(),k();var l=function(){a(".yith_override_day").on("change",function(b){var c=a(this),d=c.parents("tr").find(".yith_single_multiworkday"),e=c.parents("tr").find(".yith_over_day");c.is(":checked")?(d.show("slow"),e.val("yes")):(d.hide("slow"),e.val("no"))}).trigger("change")};l(),a(document).on("click",".yith_timeslot_all_day",function(b){b.preventDefault();var c=a(this),d=c.parents("tr").find(".yith_dayworkselect");d.val(["sun","mon","tue","wed","thu","fri","sat"]).trigger("change")}),a(document).on("click",".yith_timeslot_clear",function(b){b.preventDefault();var c=a(this),d=c.parents("tr").find(".yith_dayworkselect");d.val(null).trigger("change")})});